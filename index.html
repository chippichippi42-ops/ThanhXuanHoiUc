<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MOBA Arena - 3v3</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Main Canvas -->
    <canvas id="gameCanvas"></canvas>
    
    <!-- UI Overlay -->
    <div id="uiOverlay">
        <!-- Start Screen - thêm input tên -->
        <div id="startScreen" class="screen active">
            <div class="screen-content">
                <h1 class="game-title">MOBA ARENA</h1>
                <p class="subtitle">3v3 Battle</p>
                
                <!-- Player Name Input -->
                <div class="name-input-section">
                    <label for="playerNameInput">Tên Người Chơi:</label>
                    <input type="text" id="playerNameInput" maxlength="12" placeholder="Nhập tên..." value="HDPE">
                </div>
                
                <div class="menu-buttons">
                    <button id="btnPlay" class="btn btn-primary">CHƠI NGAY</button>
                    <button id="btnSettings" class="btn btn-secondary">CÀI ĐẶT</button>
                    <button id="btnQuit" class="btn btn-secondary">THOÁT</button>
                </div>
            </div>
        </div>
        
        <!-- Pre-game Screen -->
        <div id="pregameScreen" class="screen">
            <div class="screen-content pregame-content">
                <h2>CHUẨN BỊ TRẬN ĐẤU</h2>
                
                <!-- Hero Selection -->
                <div class="section hero-selection">
                    <h3>Chọn Tướng</h3>
                    <div id="heroGrid" class="hero-grid"></div>
                    <div id="heroInfo" class="hero-info">
                        <div class="hero-portrait" id="selectedHeroPortrait"></div>
                        <div class="hero-details">
                            <h4 id="heroName">Chọn một tướng</h4>
                            <p id="heroRole" class="hero-role"></p>
                            <p id="heroDescription" class="hero-desc"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Spell Selection -->
                <div class="section spell-selection">
                    <h3>Chọn Bổ Trợ</h3>
                    <div id="spellGrid" class="spell-grid"></div>
                </div>
                
                <!-- AI Difficulty -->
                <div class="section ai-settings">
                    <h3>Độ Khó AI</h3>
                    <div class="difficulty-row">
                        <label>AI Đồng Đội:</label>
                        <select id="allyDifficulty">
                            <option value="easy">Dễ</option>
                            <option value="normal" selected>Thường</option>
                            <option value="hard">Khó</option>
                            <option value="veryhard">Cực Khó</option>
                            <option value="nightmare">Ác Mộng</option>
                        </select>
                    </div>
                    <div class="difficulty-row">
                        <label>AI Kẻ Địch:</label>
                        <select id="enemyDifficulty">
                            <option value="easy">Dễ</option>
                            <option value="normal" selected>Thường</option>
                            <option value="hard">Khó</option>
                            <option value="veryhard">Cực Khó</option>
                            <option value="nightmare">Ác Mộng</option>
                        </select>
                    </div>
                </div>
                
                <div class="pregame-buttons">
                    <button id="btnStartGame" class="btn btn-primary">BẮT ĐẦU</button>
                    <button id="btnBackToMenu" class="btn btn-secondary">QUAY LẠI</button>
                </div>
            </div>
        </div>
        
        <!-- Settings Screen -->
        <div id="settingsScreen" class="screen">
            <div class="screen-content settings-content">
                <h2>CÀI ĐẶT</h2>
                
                <div class="settings-section">
                    <h3>Hiển Thị</h3>
                    <div class="setting-row">
                        <label>Chất lượng đồ họa:</label>
                        <select id="graphicsQuality">
                            <option value="low">Thấp</option>
                            <option value="medium" selected>Trung Bình</option>
                            <option value="high">Cao</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label>Hiệu ứng:</label>
                        <input type="checkbox" id="enableEffects" checked>
                    </div>
                    <div class="setting-row">
                        <label>Hiển thị FPS:</label>
                        <input type="checkbox" id="showFPS">
                    </div>
                    <div class="setting-row">
                        <label>Hiển thị toạ độ:</label>
                        <input type="checkbox" id="showCoordinates">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Âm Thanh</h3>
                    <div class="setting-row">
                        <label>Âm lượng chính:</label>
                        <input type="range" id="masterVolume" min="0" max="100" value="80">
                        <span id="masterVolumeValue">80%</span>
                    </div>
                    <div class="setting-row">
                        <label>Nhạc nền:</label>
                        <input type="range" id="musicVolume" min="0" max="100" value="50">
                        <span id="musicVolumeValue">50%</span>
                    </div>
                    <div class="setting-row">
                        <label>Hiệu ứng âm thanh:</label>
                        <input type="range" id="sfxVolume" min="0" max="100" value="70">
                        <span id="sfxVolumeValue">70%</span>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Điều Khiển</h3>
                    <div class="setting-row">
                        <label>Độ nhạy camera:</label>
                        <input type="range" id="cameraSensitivity" min="1" max="10" value="5">
                        <span id="cameraSensitivityValue">5</span>
                    </div>
                </div>
                
                <button id="btnCloseSettings" class="btn btn-primary">ĐÓNG</button>
            </div>
        </div>
        
        <!-- Pause Screen -->
        <div id="pauseScreen" class="screen">
            <div class="screen-content">
                <h2>TẠM DỪNG</h2>
                <div class="menu-buttons">
                    <button id="btnResume" class="btn btn-primary">TIẾP TỤC</button>
                    <button id="btnPauseSettings" class="btn btn-secondary">CÀI ĐẶT</button>
                    <button id="btnExitGame" class="btn btn-danger">THOÁT TRẬN</button>
                </div>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <div class="screen-content">
                <h2 id="gameOverTitle">KẾT THÚC</h2>
                <div id="gameOverStats" class="game-stats"></div>
                <div class="menu-buttons">
                    <button id="btnPlayAgain" class="btn btn-primary">CHƠI LẠI</button>
                    <button id="btnBackToMenuEnd" class="btn btn-secondary">VỀ MENU</button>
                </div>
            </div>
        </div>
        
        <!-- In-game UI -->
        <div id="ingameUI" class="hidden">
            <!-- Top Bar -->
            <div id="topBar">
                <div id="teamScores">
                    <span id="blueScore" class="score blue">0</span>
                    <span class="vs">VS</span>
                    <span id="redScore" class="score red">0</span>
                </div>
                <div id="gameTimer">00:00</div>
            </div>
            
            <!-- Player Stats -->
            <div id="playerStats">
                <div class="stat-bar health-bar">
                    <div id="healthFill" class="fill"></div>
                    <span id="healthText">1000/1000</span>
                </div>
                <div class="stat-bar mana-bar">
                    <div id="manaFill" class="fill"></div>
                    <span id="manaText">500/500</span>
                </div>
                <div id="levelDisplay">Lv. <span id="playerLevel">1</span></div>
                <div id="expBar">
                    <div id="expFill" class="fill"></div>
                </div>
            </div>
            
            <!-- Skill Bar -->
            <div id="skillBar">
                <div class="skill" id="skill1">
                    <span class="key">Q</span>
                    <div class="cooldown-overlay"></div>
                </div>
                <div class="skill" id="skill2">
                    <span class="key">E</span>
                    <div class="cooldown-overlay"></div>
                </div>
                <div class="skill" id="skill3">
                    <span class="key">R</span>
                    <div class="cooldown-overlay"></div>
                </div>
                <div class="skill ultimate" id="skill4">
                    <span class="key">T</span>
                    <div class="cooldown-overlay"></div>
                </div>
                <div class="skill spell" id="spellSlot">
                    <span class="key">F</span>
                    <div class="cooldown-overlay"></div>
                </div>
                <div class="skill attack" id="attackSlot">
                    <span class="key">Space</span>
                </div>
            </div>
            
            <!-- Minimap -->
            <canvas id="minimapCanvas"></canvas>
            
            <!-- Stats Panel (P key toggle) -->
            <div id="statsPanel" class="hidden">
                <h3>THÔNG SỐ CHI TIẾT</h3>
                <div id="statsList"></div>
            </div>
            
            <!-- Kill Feed -->
            <div id="killFeed"></div>
            
            <!-- FPS Counter -->
            <div id="fpsCounter" class="hidden">FPS: 60</div>
        </div>
    </div>
    
    <!-- Mobile Controls -->
    <div id="mobileControls" class="hidden">
        <div id="joystick" class="joystick">
            <div class="joystick-inner"></div>
        </div>
        <div id="mobileSkills">
            <button class="mobile-skill" data-skill="q">Q</button>
            <button class="mobile-skill" data-skill="e">E</button>
            <button class="mobile-skill" data-skill="r">R</button>
            <button class="mobile-skill" data-skill="t">T</button>
            <button class="mobile-skill" data-skill="f">F</button>
            <button class="mobile-skill" data-skill="space">ATK</button>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/heroes/vanheo.js"></script>
    <script src="js/heroes/zephy.js"></script>
    <script src="js/heroes/lalo.js"></script>
    <script src="js/heroes/nemo.js"></script>
    <script src="js/heroes/balametany.js"></script>
    <script src="js/map.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/projectile.js"></script>
    <script src="js/tower.js"></script>
    <script src="js/minion.js"></script>
    <script src="js/creature.js"></script>
    <script src="js/hero.js"></script>
    <script src="js/combat.js"></script>
    
    <!-- New AI System -->
    <script src="js/ai/utils/VisionSystem.js"></script>
    <script src="js/ai/tactical/PathFinding.js"></script>
    <script src="js/ai/tactical/DodgeSystem.js"></script>
    <script src="js/ai/tactical/ComboExecutor.js"></script>
    <script src="js/ai/tactical/TargetSelector.js"></script>
    <script src="js/ai/core/AIState.js"></script>
    <script src="js/ai/core/DecisionMaker.js"></script>
    <script src="js/ai/core/AIController.js"></script>
    <script src="js/ai/intelligence/StrategicAnalyzer.js"></script>
    <script src="js/ai/intelligence/CombatAnalyzer.js"></script>
    <script src="js/ai/intelligence/MovementOptimizer.js"></script>
    <script src="js/ai/intelligence/LLMDecisionEngine.js"></script>
    <script src="js/ai/intelligence/AdvancedSmartEvaluator.js"></script>
    <script src="js/ai/intelligence/SmartDecisionCache.js"></script>
    <script src="js/ai/intelligence/AdvancedPromptBuilder.js"></script>
    <script src="js/ai/intelligence/OllamaIntegrator.js"></script>
    <script src="js/ai/intelligence/ResponseFusion.js"></script>
    <script src="js/ai/behaviors/LaneBehavior.js"></script>
    <script src="js/ai/behaviors/CombatBehavior.js"></script>
    <script src="js/ai/behaviors/RetreatBehavior.js"></script>
    <script src="js/ai/behaviors/PushBehavior.js"></script>
    <script src="js/ai/behaviors/DodgeBehavior.js"></script>
    <script src="js/ai/behaviors/JungleBehavior.js"></script>
    <script src="js/ai/AIManager.js"></script>
    
    <script src="js/minimap.js"></script>
    <script src="js/input.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/screens.js"></script>
    <script src="js/game.js"></script>
    <script src="js/audio.js"></script>
</body>
</html>
